<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>한국 경제 지표 대시보드 (Live)</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="loading-overlay" class="hidden">
        <div class="spinner"></div>
        <p>데이터를 불러오는 중입니다...</p>
    </div>

    <!-- API 키 입력창 (2개 모두 받도록 복원) -->
    <div id="api-key-section">
        <div class="api-key-container">
            <h1>대시보드 데이터 로드</h1>
            <p>데이터를 불러오려면 API 키를 입력해주세요. 키는 브라우저에만 저장됩니다.</p>
            <div class="api-input-group">
                <label for="ecos-api-key">한국은행(ECOS) API 키</label>
                <input type="password" id="ecos-api-key" placeholder="ECOS API 키를 여기에 붙여넣으세요">
                <a href="https://ecos.bok.or.kr/#/dev/main" target="_blank">키 발급받기</a>
            </div>
            <div class="api-input-group">
                <label for="market-api-key">Alpha Vantage API 키</label>
                <input type="password" id="market-api-key" placeholder="Alpha Vantage API 키를 여기에 붙여넣으세요">
                 <a href="https://www.alphavantage.co/support/#api-key" target="_blank">키 발급받기</a>
            </div>
            <button id="load-data-btn">데이터 불러오기</button>
        </div>
    </div>
    
    <div id="dashboard-main-container" class="dashboard-container hidden">
        <header class="control-bar">
            <div class="logo"><h1>📈 한국 경제 지표 대시보드 (Live)</h1></div>
            <div class="controls">
                <div class="control-group"><label for="date-range">기간 선택:</label><input type="text" id="date-range"></div>
                <div class="control-group"><label>지표 선택:</label><div id="indicator-toggles"></div></div>
                <button id="refresh-btn">🔄 기간 적용</button>
            </div>
        </header>

        <!-- KPI 카드 (모든 카드 복원) -->
        <section class="kpi-cards">
            <div class="card" id="kpi-kospi"><div class="card-content"><p class="title">KOSPI (대용)</p><h2 class="value">-,---.--</h2><p class="change">-.--%</p></div><div class="sparkline" id="sparkline-kospi"></div></div>
            <div class="card" id="kpi-usd-krw"><div class="card-content"><p class="title">USD/KRW 환율</p><h2 class="value">-,---.--</h2><p class="change">-.--%</p></div><div class="sparkline" id="sparkline-usd-krw"></div></div>
            <div class="card" id="kpi-cpi"><div class="card-content"><p class="title">소비자물가지수 (YoY)</p><h2 class="value">-.--%</h2><p class="change">--</p></div><div class="sparkline" id="sparkline-cpi"></div></div>
            <div class="card" id="kpi-bond-10y"><div class="card-content"><p class="title">국고채 10년 금리</p><h2 class="value">-.--%</h2><p class="change">-.--p</p></div><div class="sparkline" id="sparkline-bond-10y"></div></div>
            <div class="card" id="kpi-m2"><div class="card-content"><p class="title">M2 통화량 (YoY)</p><h2 class="value">-.--%</h2><p class="change">--</p></div><div class="sparkline" id="sparkline-m2"></div></div>
        </section>

        <!-- 메인/보조 차트 (원래 구조로 복원) -->
        <main class="main-chart-area">
            <div class="chart-container"><div class="chart-header"><h3>주요 지표 시계열 비교</h3><div class="chart-controls"><label><input type="checkbox" id="dual-axis-toggle"> Y축 분리</label></div></div><div id="main-timeseries-chart" class="chart-body"></div></div>
        </main>
        <aside class="sub-chart-area">
            <div class="chart-container"><div class="chart-header"><h3>KOSPI(대용) 월별 수익률</h3></div><div id="monthly-return-heatmap" class="chart-body"></div></div>
            <div class="chart-container"><div class="chart-header"><h3>수익률 곡선 스프레드 (10Y - 3Y)</h3></div><div id="yield-spread-chart" class="chart-body"></div></div>
        </aside>

        <section class="correlation-area">
            <div class="chart-container"><div class="chart-header"><h3>지표 간 상관관계 분석</h3><div class="chart-controls"><label>X축: <select id="scatter-x"></select></label><label>Y축: <select id="scatter-y"></select></label></div></div><div id="scatter-plot" class="chart-body"></div></div>
        </section>
        <footer class="data-table-area">
            <div class="table-container"><div class="table-header"><h3>세부 데이터</h3><button id="download-csv">CSV 다운로드</button></div><div class="table-wrapper"><table id="data-table"><thead></thead><tbody></tbody></table></div><div class="pagination"><button id="prev-page">이전</button><span id="page-info"></span><button id="next-page">다음</button></div></div>
        </footer>
    </div>
    
    <script src="script.js"></script>
</body>
</html>
